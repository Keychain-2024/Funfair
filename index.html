<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Update Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        form {
            display: grid;
            gap: 10px;
        }
        input, select, button {
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Update Order</h1>
    <form id="updateForm">
        <input type="text" id="orderId" placeholder="Order ID" required>
        <input type="text" id="itemName" placeholder="Item Name" required>
        <input type="number" id="quantity" placeholder="Quantity" required>
        <input type="number" id="sellingPrice" placeholder="Selling Price" step="0.01" required>
        <button type="submit">Update Order</button>
    </form>
    <div id="message"></div>

    <script type="module">
        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBjgoF0vRnU0x4bTRgO9evmJ1JD0k-39Zc",
            authDomain: "e-e60ae.firebaseapp.com",
            projectId: "e-e60ae",
            storageBucket: "e-e60ae.firebasestorage.app",
            messagingSenderId: "869284020508",
            appId: "1:869284020508:web:91f9102019fa9d3bc93ad9",
            measurementId: "G-9R70RSE6QH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Function to update data
        function updateOrder(orderId, data) {
            const orderRef = ref(db, 'orders/' + orderId);
            update(orderRef, data)
                .then(() => {
                    document.getElementById('message').innerText = "Order updated successfully!";
                })
                .catch(error => {
                    console.error("Error updating order:", error);
                    document.getElementById('message').innerText = "Error updating order.";
                });
        }

        // Form submission handler
        document.getElementById('updateForm').addEventListener('submit', (event) => {
            event.preventDefault();

            const orderId = document.getElementById('orderId').value.trim();
            const itemName = document.getElementById('itemName').value.trim();
            const quantity = parseInt(document.getElementById('quantity').value);
            const sellingPrice = parseFloat(document.getElementById('sellingPrice').value);

            // Calculating profit and shares
            const costPrice = 10; // Example cost price, replace as necessary
            const profit = (sellingPrice - costPrice) * quantity;
            const arihantShare = profit * 0.3;
            const vanshShare = profit * 0.3;
            const yashShare = profit * 0.4;

            // Data to update
            const updatedData = {
                itemName,
                quantity,
                sellingPrice,
                profit,
                arihantShare,
                vanshShare,
                yashShare
            };

            updateOrder(orderId, updatedData);
        });
    </script>
</body>
</html>
